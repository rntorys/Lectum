<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lectum</title>
  <link rel="icon" href="img/minilogo.png" type="image/png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app" id="appRoot">
    <header class="topbar">
      <div class="brand">
        <img class="logo" src="img/logo (2).png" alt="Logo">
        <div>
          <p class="eyebrow">Dashboard academico</p>
          <h1>Lectum</h1>
        </div>
      </div>
      <div class="top-actions">
        <button class="icon-button" id="configOpen" aria-label="Abrir configuracion">‚öô</button>
        <button class="icon-button" id="updatesOpen" aria-label="Abrir novedades">üóÇÔ∏è</button>
        <button class="toggle" id="themeToggle" aria-label="Cambiar tema">
          <span id="themeLabel">Modo oscuro</span>
        </button>
      </div>
    </header>

    <main class="layout">
      <div class="left-column">
        <section class="summary">
          <div class="summary-head">
            <div>
              <p class="eyebrow">Promedio general</p>
              <h3>Vista por grupo</h3>
            </div>
            <label class="summary-filter">
              Grupo
              <select id="groupFilter">
                <option value="">Todos</option>
              </select>
            </label>
          </div>
          <div class="quick-links">
            <button class="link-add" id="linkAdd" aria-label="Agregar link">+</button>
            <div id="linksList" class="links-list"></div>
          </div>
          <article class="summary-card">
            <p>Promedio general</p>
            <h2 id="overallAverage">0.0</h2>
            <span id="overallFoot">Sin materias aun</span>
          </article>
          <article class="summary-card">
            <p>Materias activas</p>
            <h2 id="overallSubjects">0</h2>
            <span id="overallSubjectsFoot">0 materias</span>
          </article>
          <article class="summary-card">
            <p>Notas registradas</p>
            <h2 id="overallNotes">0</h2>
            <span id="overallNotesFoot">0 notas totales</span>
          </article>
          <article class="summary-card">
            <p>Promedio mas bajo</p>
            <h2 id="overallLowest">0.0</h2>
            <span id="overallLowestFoot">Sin materias aun</span>
          </article>
        </section>

        <section class="panel">
          <div class="panel-head">
            <div>
              <h3>Materias</h3>
              <p>Selecciona una materia para ver su detalle y calcular sus notas.</p>
            </div>
          </div>
          <div id="subjectsGrid" class="subjects-grid"></div>
        </section>

        <section class="panel">
          <div class="panel-head">
            <div>
              <h3>Pruebas pendientes</h3>
              <p>Notas programadas o futuras del grupo seleccionado.</p>
            </div>
          </div>
          <div id="pendingList" class="pending-list"></div>
        </section>
      </div>

      <aside class="right-column">
        <section class="panel">
          <div class="panel-head">
            <div>
              <h3>Agregar materia</h3>
              <p>Define el curso y el modo de calculo de notas.</p>
            </div>
          </div>
          <form id="subjectForm" class="subject-form">
            <label>
              Nombre de la materia
              <input type="text" id="subjectName" placeholder="Calculo I" required>
            </label>
            <label>
              Docente (opcional)
              <input type="text" id="subjectTeacher" placeholder="Profe Ramirez">
            </label>
            <label>
              Grupo / semestre
              <input type="text" id="subjectGroup" placeholder="2026-I">
            </label>
            <label>
              Color de la materia
              <input type="color" id="subjectColor" value="#1f4c7a">
            </label>
            <label>
              Modo de calculo
              <select id="subjectMode" required>
                <option value="percent">Porcentaje</option>
                <option value="average">Promedio</option>
                <option value="geometric">Geometrica</option>
              </select>
            </label>
            <button class="primary" type="submit">Crear materia</button>
          </form>
        </section>
      </aside>
    </main>
  </div>

  <div id="subjectModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <button class="modal-close" id="modalClose" aria-label="Cerrar">√ó</button>
      <div class="modal-header">
        <div>
          <p class="eyebrow" id="modalEyebrow">Materia</p>
          <h2 id="modalTitle">-</h2>
          <label class="modal-field">
            Docente
            <input type="text" id="modalTeacher" placeholder="Docente sin registrar">
          </label>
        </div>
        <div class="mode-select">
          <label for="modalMode">Modo de calculo</label>
          <select id="modalMode">
            <option value="percent">Porcentaje</option>
            <option value="average">Promedio</option>
            <option value="geometric">Geometrica</option>
          </select>
        </div>
        <div class="mode-select">
          <label for="modalColor">Color</label>
          <input type="color" id="modalColor" value="#1f4c7a">
        </div>
        <button class="ghost danger" type="button" id="deleteSubject">Eliminar materia</button>
      </div>

      <div class="modal-summary">
        <div>
          <p>Promedio materia</p>
          <h3 id="subjectAverage">0.0</h3>
        </div>
        <div>
          <p>Total notas</p>
          <h3 id="subjectNotes">0</h3>
        </div>
        <div id="weightBox">
          <p>Porcentaje acumulado</p>
          <h3 id="subjectWeight">0%</h3>
        </div>
      </div>
      <div id="weightAlert" class="alert is-hidden"></div>

      <div class="notes">
        <div class="panel-head">
          <div>
            <h3>Notas de la materia</h3>
            <p>Agrega notas solidas o notas control derivadas de otras notas.</p>
          </div>
        </div>
        <div id="notesList" class="notes-list"></div>
      </div>

      <form id="noteForm" class="note-form">
        <div class="row">
          <label>
            Nombre de la nota
            <input type="text" id="noteTitle" placeholder="Parcial 1" required>
          </label>
          <label>
            Tipo de nota
            <select id="noteType" required>
              <option value="solid">Nota solida</option>
              <option value="control">Nota control</option>
            </select>
          </label>
        </div>

        <div class="row" id="solidRow">
          <label>
            Nota
            <input type="number" id="noteScore" min="0" max="20" step="0.1">
          </label>
          <label id="weightLabel">
            Porcentaje (%)
            <input type="number" id="noteWeight" min="0" max="100" step="0.1" value="0">
          </label>
        </div>
        <div class="row">
          <label>
            Fecha
            <input type="date" id="noteDate">
          </label>
          <label class="checkline">
            <input type="checkbox" id="noteScheduled">
            Programar (pendiente)
          </label>
        </div>

        <div class="control-box" id="controlBox">
          <div class="control-head">
            <p class="control-title">Componentes de la nota control</p>
            <span class="tooltip" data-tooltip="Nota control: se calcula desde varias notas peque√±as">?</span>
            <span class="tooltip" data-tooltip="Nota solida: una sola nota directa">i</span>
          </div>
          <div class="row">
            <label>
              Nombre componente
              <input type="text" id="controlTitle" placeholder="Control 1">
            </label>
            <label>
              Nota componente
              <input type="number" id="controlScore" min="0" max="20" step="0.1">
            </label>
            <button type="button" class="ghost" id="addControl">Agregar componente</button>
          </div>
          <div id="controlList" class="control-list"></div>
        </div>

        <div class="form-actions">
          <button class="primary" type="submit" id="saveNote">Agregar nota</button>
          <button class="ghost is-hidden" type="button" id="cancelEdit">Cancelar edicion</button>
        </div>
      </form>

      <div class="files-section">
        <div class="panel-head">
          <div>
            <h3>Archivos de la materia</h3>
            <p>Sube materiales y apuntes relacionados.</p>
          </div>
        </div>
        <form id="fileForm" class="file-form">
          <label>
            Nombre del archivo
            <input type="text" id="fileName" placeholder="Apuntes semana 3" required>
          </label>
          <label>
            Archivo
            <input type="file" id="fileInput">
          </label>
          <div class="form-actions">
            <button class="primary" type="submit" id="saveFile">Subir archivo</button>
            <button class="ghost is-hidden" type="button" id="cancelFileEdit">Cancelar edicion</button>
          </div>
        </form>
        <div id="filesList" class="files-list"></div>
      </div>
    </div>
  </div>

  <div id="configModal" class="modal" aria-hidden="true">
    <div class="modal-card modal-compact">
      <button class="modal-close" id="configClose" aria-label="Cerrar">√ó</button>
      <div>
        <p class="eyebrow">Configuracion</p>
        <h2>Datos del dashboard</h2>
        <p class="muted">Exporta o importa tus datos en formato JSON.</p>
      </div>
      <div class="config-actions">
        <button class="primary" type="button" id="exportData">Exportar JSON</button>
        <label class="file-input">
          Importar JSON
          <input type="file" id="importFile" accept="application/json">
        </label>
      </div>
      <p class="muted small">La importacion reemplaza los datos actuales.</p>
    </div>
  </div>

  <div id="updatesModal" class="modal" aria-hidden="true">
    <div class="modal-card modal-compact">
      <button class="modal-close" id="updatesClose" aria-label="Cerrar">√ó</button>
      <div>
        <p class="eyebrow">Novedades</p>
        <h2>Actualizaciones</h2>
        <p class="muted">Notas de las actualizaciones recientes.</p>
      </div>
      <div class="updates-list">
        <article class="update-item">
          <h4>1.0.1v</h4>
          <p><b>-Agrega accesos directos con favicon, emoji o imagen.</b></p>
          <p>---El objetivo de esto es que puedas tener todo tu apartado universitario en un solo lugar, ya no solo notas, si no que acceso directo a tu Outlook, Copilot, Portal de tu Universidad, Pagos en Linea, etc... Muchas veces en webs como las de Microsoft, el favicon en ves de ser el del link Microsoft usa el logo de la empresa, en esos casos se recomienda descargar de google el png transparente del logo y agregarlo tu mismo. De todos modos se pueden nombrar los links, por si quieres diferenciar mejor. La funcionalidad es simple, clickeas el "+" y podras colocar el link, nombrarlo si quieres y luego podras seleccionar si lo representar√° el Favicon (El logo de la pesta√±a), un emoji (M√°s dificil diferenciar, pero es por si acaso) y finalmente subir una imagen (La mejor opcion). Luego de eso, habr√° un lapiz al lado de cada m√≥dulo de link por si quieres editar o eliminar el link.</p>
          <p><b>-Seccion de Actualizaciones</b></p>
          <p>---Con esto cada vez que se actualice una funci√≥n estaran aqui las especificaciones, asi ninguna herramienta es realmente complicada. Este apartado siempre se encontrar√° al lado de la rueda de configuraci√≥n.</p>
          <p><b>-Docente Editable</b></p>
          <p>---Ahora el Docente se puede modificar en caso de.</p>
          <p><b>-Subida de Archivos</b></p>
          <p>---Ahora puedes subir archivos a conveniencia en lo mas bajo del panel por materias, en el que puedes escribir el nombre y luego subir el archivo, asi tienes todo en 1 y m√°s organizado, siempre a mano.</p>
        </article>
      </div>
    </div>
  </div>

  <div id="linkModal" class="modal" aria-hidden="true">
    <div class="modal-card modal-compact">
      <button class="modal-close" id="linkClose" aria-label="Cerrar">√ó</button>
      <div>
        <p class="eyebrow">Links rapidos</p>
        <h2>Agregar link</h2>
        <p class="muted">Guarda accesos directos a tus plataformas.</p>
      </div>
      <form id="linkForm" class="link-form">
        <label>
          URL
          <input type="url" id="linkUrl" placeholder="https://tu-sitio.com" required>
        </label>
        <label>
          Nombre (opcional)
          <input type="text" id="linkLabel" placeholder="Universidad">
        </label>
        <div class="link-options">
          <label>
            <input type="radio" name="linkIconType" value="favicon" checked>
            Usar favicon
          </label>
          <label>
            <input type="radio" name="linkIconType" value="emoji">
            Usar emoji
          </label>
          <label>
            <input type="radio" name="linkIconType" value="image">
            Usar imagen
          </label>
        </div>
        <label id="emojiRow">
          Emoji
          <input type="text" id="linkEmoji" placeholder="üéì">
        </label>
        <label id="fileRow">
          Imagen
          <input type="file" id="linkFile" accept="image/*">
        </label>
        <div class="form-actions">
          <button class="primary" type="submit" id="saveLink">Guardar link</button>
          <button class="ghost danger is-hidden" type="button" id="deleteLink">Eliminar link</button>
        </div>
      </form>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
